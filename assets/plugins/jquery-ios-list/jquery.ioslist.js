!function(a){var s=function(e,t){this.$elem=a(e),this.$elem.data("instance",this),this.init(t)};s.prototype={defaults:{classes:{animated:"list-view-animated",container:"list-view-wrapper",hidden:"list-view-hidden",stationaryHeader:"list-view-fake-header"},selectors:{groupContainer:".list-view-group-container",groupHeader:".list-view-group-header",stationaryHeader:"h2"}},init:function(e){var o=this,t=!!navigator.userAgent.match(/ipad|iphone|ipod/gi);this.options=a.extend(!0,{},this.defaults,e||{}),this.elems=[],this.$elem.addClass("list-view"),this.$elem.children().wrapAll(["<div class='",this.options.classes.container,"' data-ios='",t,"'></div>"].join("")),this.$elem.prepend(["<",this.options.selectors.stationaryHeader,"/>"].join("")),this.$listWrapper=this.$elem.find("."+this.options.classes.container),this.$fakeHeader=this.$elem.find(this.options.selectors.stationaryHeader).eq(0),this.$fakeHeader.addClass(this.options.classes.stationaryHeader),this.$elem.find(this.options.selectors.groupContainer).each(function(e){var t=o.$elem.find(o.options.selectors.groupContainer).eq(e),s=t.find(o.options.selectors.groupHeader).eq(0),i=t.height(),a=t.position().top;o.elems.push({list:t,header:s,listHeight:i,headerText:s.text(),headerHeight:s.outerHeight(),listOffset:a,listBottom:i+a})}),this.$fakeHeader.text(this.elems[0].headerText),this.$listWrapper.scroll(function(){o.testPosition()})},testPosition:function(){for(var e,t,s=this.$listWrapper.scrollTop(),i=0;this.elems[i].listOffset-s<=0&&((t=(e=this.elems[i]).listBottom-s)<-e.headerHeight&&e,!(++i>=this.elems.length)););t<0&&t>-e.headerHeight?(this.$fakeHeader.addClass(this.options.classes.hidden),a(e.list).addClass(this.options.classes.animated)):(this.$fakeHeader.removeClass(this.options.classes.hidden),e&&a(e.list).removeClass(this.options.classes.animated)),e&&this.$fakeHeader.text(e.headerText)}},a.fn.ioslist=function(e,t){return this.each("string"==typeof e?function(){a(this).data("instance")[e](t)}:function(){new s(this,e)})}}(jQuery,window,document);